import { initializeApp } from "firebase/app";
import { getDatabase, ref, push, set } from "firebase/database";

// Your web app's Firebase configuration
const firebaseConfig = {
apiKey: "AIzaSyAzh0qapVg-vuD5kPGTSUwZp6n9ds2ksd4",
authDomain: "e-students-764ac.firebaseapp.com",
databaseURL: "https://e-students-764ac-default-rtdb.firebaseio.com",
projectId: "e-students-764ac",
storageBucket: "e-students-764ac.appspot.com",
messagingSenderId: "458914599582",
appId: "1:458914599582:web:e3ec37a1c12c97217d618f"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase();

// Function to create a new bursary item
function createBursaryItem() {
const bursaryItem = document.createElement("div");
bursaryItem.className = "bursary";
bursaryItem.innerHTML = <h2 contenteditable="true">Bursary Title</h2> <p contenteditable="true">Description of the bursary.</p> <input type="text" placeholder="Apply Link URL"> <button class="apply-btn">Apply</button> <button class="share-btn">Share</button>;

const applyButton = bursaryItem.querySelector(".apply-btn");
applyButton.addEventListener("click", () => {
const urlInput = bursaryItem.querySelector("input[type='text']");
const linkURL = urlInput.value;
if (linkURL) {
// Store the URL in the database
const newBursaryRef = push(ref(db, "bursaries"));
set(newBursaryRef, { title: "Bursary Title", description: "Description of the bursary", applyLink: linkURL });
} else {
alert("Please provide a valid URL.");
}
});

const shareButton = bursaryItem.querySelector(".share-btn");
shareButton.addEventListener("click", () => {
// Get the bursary data from the database
const bursaryRef = ref(db, "bursaries/" + newBursaryRef.key);
const bursaryData = await bursaryRef.get();

// Share the bursary data with everyone
const shareRef = ref(db, "shared-bursaries");
set(shareRef, bursaryData);
});

return bursaryItem;
}

// Function to add a new bursary item to the container
function addBursary() {
const bursariesContainer = document.getElementById("bursaries-container");
const newBursary = createBursaryItem();
bursariesContainer.appendChild(newBursary);
}

const addBursaryButton = document.getElementById("add-bursary");
addBursaryButton.addEventListener("click", addBursary);
